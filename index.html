<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Answer Sheet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --bg-gradient-start: #2c2c2c;
            --bg-gradient-end: #1a1a1a;
            --container-bg-start: #3a3a3a;
            --container-bg-end: #2e2e2e;
            --container-border: rgba(255, 255, 255, 0.1);
            --watermark-color: rgba(255, 255, 255, 0.15);
            --heading-color: #f0f0f0;
            --paragraph-color: #b0b0b0;
            --question-num-color: #e0e0e0;

            --button-bg-default: #444444;
            --button-border-default: #666666;
            --button-text-default: #ffffff;
            --button-hover-bg-default: #555555;
            --button-active-bg-default: #333333;

            --selected-answer-bg-start: #ffffff;
            --selected-answer-bg-end: #e0e0e0;
            --selected-answer-border: #b0b0b0;
            --selected-answer-text: #333333;
            --selected-answer-glow: rgba(255, 255, 255, 0.4);

            --done-button-bg: #333333;
            --done-button-hover-bg: #444444;
            --done-button-active-bg: #222222;

            --reset-button-bg: #555555;
            --reset-button-hover-bg: #666666;
            --reset-button-active-bg: #444444;

            --restart-button-bg: #777777;
            --restart-button-hover-bg: #888888;
            --restart-button-active-bg: #666666;

            --nav-button-bg: #666666;
            --nav-button-hover-bg: #777777;
            --nav-button-active-bg: #555555;

            --preview-button-bg: #333333;
            --preview-button-hover-bg: #444444;
            --preview-button-active-bg: #222222;

            --close-preview-button-bg: #666666;
            --close-preview-button-hover-bg: #777777;
            --close-preview-button-active-bg: #555555;

            --mute-button-bg: #555555;
            --mute-button-border: #666666;
            --mute-button-color: #ffffff;
            --mute-button-hover-bg: #666666;
            --mute-button-active-bg: #444444;
            --mute-button-muted-bg: #333333;
            --mute-button-muted-border: #444444;
            --mute-button-muted-color: #b0b0b0;

            --message-box-bg: #333333;
            --message-box-border: #555555;
            --message-box-text: #e0e0e0;
            --message-input-border: #777777;
            --message-input-bg: #424242;
            --message-input-text: #e0e0e0;
            --message-button-bg: #555555;
            --message-button-hover-bg: #666666;
            --message-button-red-bg: #777777;
            --message-button-red-text: #333333;
            --message-button-red-hover-bg: #888888;

            --answers-display-border: #444444;
            --answers-display-bg: #333333;
            --answers-display-text: #e0e0e0;
            --check-icon-color: #b0b0b0;

            --skipped-list-border: #777777;
            --skipped-list-bg: #424242;
            --skipped-list-heading: #e0e0e0;
            --skipped-span-bg: #666666;
            --skipped-span-color: #ffffff;
            --skipped-span-hover-bg: #777777;

            --timer-text-color: #f0f0f0;
            --timer-input-bg: #424242;
            --timer-input-border: #666666;
            --timer-input-text: #e0e0e0;
            --timer-button-bg: #555555;
            --timer-button-hover-bg: #666666;
            --timer-button-active-bg: #444444;

            --scrollbar-track-bg: #3a3a3a;
            --scrollbar-thumb-bg: #666666;
            --scrollbar-thumb-hover-bg: #777777;
        }

        body.light-mode {
            --bg-gradient-start: #f0f0f0;
            --bg-gradient-end: #e0e0e0;
            --container-bg-start: #ffffff;
            --container-bg-end: #f9f9f9;
            --container-border: rgba(0, 0, 0, 0.1);
            --watermark-color: rgba(0, 0, 0, 0.387);
            --heading-color: #333333;
            --paragraph-color: #666666;
            --question-num-color: #444444;

            --button-bg-default: #e0e0e0;
            --button-border-default: #cccccc;
            --button-text-default: #333333;
            --button-hover-bg-default: #d0d0d0;
            --button-active-bg-default: #f0f0f0;

            --selected-answer-bg-start: #444444;
            --selected-answer-bg-end: #333333;
            --selected-answer-border: #666666;
            --selected-answer-text: #ffffff;
            --selected-answer-glow: rgba(0, 0, 0, 0.3);

            --done-button-bg: #cccccc;
            --done-button-hover-bg: #bbbbbb;
            --done-button-active-bg: #dddddd;

            --reset-button-bg: #aaaaaa;
            --reset-button-hover-bg: #999999;
            --reset-button-active-bg: #bbbbbb;

            --restart-button-bg: #888888;
            --restart-button-hover-bg: #777777;
            --restart-button-active-bg: #999999;

            --nav-button-bg: #999999;
            --nav-button-hover-bg: #888888;
            --nav-button-active-bg: #aaaaaa;

            --preview-button-bg: #cccccc;
            --preview-button-hover-bg: #bbbbbb;
            --preview-button-active-bg: #dddddd;

            --close-preview-button-bg: #aaaaaa;
            --close-preview-button-hover-bg: #999999;
            --close-preview-button-active-bg: #bbbbbb;

            --mute-button-bg: #aaaaaa;
            --mute-button-border: #999999;
            --mute-button-color: #333333;
            --mute-button-hover-bg: #999999;
            --mute-button-active-bg: #bbbbbb;
            --mute-button-muted-bg: #cccccc;
            --mute-button-muted-border: #bbbbbb;
            --mute-button-muted-color: #666666;

            --message-box-bg: #ffffff;
            --message-box-border: #dddddd;
            --message-box-text: #333333;
            --message-input-border: #bbbbbb;
            --message-input-bg: #f5f5f5;
            --message-input-text: #333333;
            --message-button-bg: #aaaaaa;
            --message-button-hover-bg: #999999;
            --message-button-red-bg: #888888;
            --message-button-red-text: #ffffff;
            --message-button-red-hover-bg: #777777;

            --answers-display-border: #dddddd;
            --answers-display-bg: #f5f5f5;
            --answers-display-text: #333333;
            --check-icon-color: #666666;

            --skipped-list-border: #bbbbbb;
            --skipped-list-bg: #e5e5e5;
            --skipped-list-heading: #444444;
            --skipped-span-bg: #cccccc;
            --skipped-span-color: #333333;
            --skipped-span-hover-bg: #bbbbbb;

            --timer-text-color: #333333;
            --timer-input-bg: #f5f5f5;
            --timer-input-border: #bbbbbb;
            --timer-input-text: #333333;
            --timer-button-bg: #aaaaaa;
            --timer-button-hover-bg: #999999;
            --timer-button-active-bg: #bbbbbb;

            --scrollbar-track-bg: #f0f0f0;
            --scrollbar-thumb-bg: #999999;
            --scrollbar-thumb-hover-bg: #888888;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(to bottom right, var(--bg-gradient-start), var(--bg-gradient-end));
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }
        .container {
            background: linear-gradient(145deg, var(--container-bg-start), var(--container-bg-end));
            border-radius: 1.5rem;
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.5), 0 0 0 3px var(--container-border);
            padding: 2.25rem;
            width: 100%;
            max-width: 500px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 1.75rem;
            position: relative;
            z-index: 10;
            border: 1px solid var(--container-border);
            max-height: 95vh;
            overflow-y: auto;
        }

          .website-watermark {
            position: fixed;
            top: 16px; 
         
            font-size: 1.2rem; 
            color: var(--watermark-color);
            pointer-events: none;
            white-space: nowrap;
            z-index: 100;
            font-weight: bold;
            
            padding: 0 10px; 
        }

        .container h1 {
            font-size: 2.75rem;
            color: var(--heading-color);
        }
        .container p {
            font-size: 1.25rem;
            color: var(--paragraph-color);
        }
        .container p span {
            color: var(--question-num-color);
        }
        @media (max-width: 640px) {
            .container {
                padding: 1.5rem;
                gap: 1.2rem;
            }
            .container h1 {
                font-size: 2.4rem;
            }
            .container p {
                font-size: 1.1rem;
            }
            .answer-button {
                font-size: 1.6rem;
                padding: 0.9rem;
            }
            .done-button, .reset-button, .nav-button, .restart-button, .add-option-button, .preview-button, .close-preview-button, .mute-button, .theme-toggle-button, .timer-button, .timer-input {
                font-size: 1.05rem;
                padding: 0.9rem;
            }
            .answers-display li {
                font-size: 1rem;
            }
            .website-watermark {
                font-size: 1rem; 
                padding: 0 5px;
            }
        }

        .answer-button {
            @apply flex-1 py-4 text-2xl font-bold rounded-xl transition-all duration-200 ease-in-out;
            background: var(--button-bg-default);
            color: var(--button-text-default);
            border: 1px solid var(--button-border-default);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        .answer-button:hover:not(:disabled) {
            background: var(--button-hover-bg-default);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .answer-button:active:not(:disabled) {
            background: var(--button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .answer-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }
        .answer-button.bg-indigo-300 {
            background: linear-gradient(135deg, var(--selected-answer-bg-start), var(--selected-answer-bg-end));
            border: 2px solid var(--selected-answer-border);
            color: var(--selected-answer-text);
            box-shadow: 0 0 0 4px var(--selected-answer-glow), 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .done-button, .reset-button, .nav-button, .restart-button, .add-option-button, .preview-button, .close-preview-button, .timer-button {
            @apply w-full py-4 text-xl font-bold rounded-xl transition-all duration-200 ease-in-out;
            color: var(--button-text-default);
            border: 1px solid var(--button-border-default);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        .done-button:hover:not(:disabled) {
            background: var(--done-button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .done-button:active:not(:disabled) {
            background: var(--done-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .reset-button {
            background: var(--reset-button-bg);
        }
        .reset-button:hover:not(:disabled) {
            background: var(--reset-button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .reset-button:active:not(:disabled) {
            background: var(--reset-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .restart-button {
            background: var(--restart-button-bg);
        }
        .restart-button:hover:not(:disabled) {
            background: var(--restart-button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .restart-button:active:not(:disabled) {
            background: var(--restart-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .add-option-button {
            background: #888888;
        }
        .add-option-button:hover:not(:disabled) {
            background: #999999;
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .add-option-button:active:not(:disabled) {
            background: #777777;
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }


        .nav-button {
            background: var(--nav-button-bg);
        }
        .nav-button:hover:not(:disabled) {
            background: var(--nav-button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .nav-button:active:not(:disabled) {
            background: var(--nav-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }

        .preview-button {
            background: var(--preview-button-bg);
        }
        .preview-button:hover:not(:disabled) {
            background: var(--preview-button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .preview-button:active:not(:disabled) {
            background: var(--preview-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .close-preview-button {
            background: var(--close-preview-button-bg);
        }
        .close-preview-button:hover:not(:disabled) {
            background: var(--close-preview-button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .close-preview-button:active:not(:disabled) {
            background: var(--close-preview-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .mute-button, .theme-toggle-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            border: 1px solid var(--mute-button-border);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .mute-button {
            background: var(--mute-button-bg);
            color: var(--mute-button-color);
        }
        .mute-button:hover:not(:disabled) {
            background: var(--mute-button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .mute-button:active:not(:disabled) {
            background: var(--mute-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .mute-button.muted {
            background: var(--mute-button-muted-bg);
            border-color: var(--mute-button-muted-border);
            color: var(--mute-button-muted-color);
        }
        .mute-button.muted:hover:not(:disabled) {
            background: var(--mute-button-muted-hover-bg);
        }

        .theme-toggle-button {
            background: var(--mute-button-bg);
            color: var(--mute-button-color);
            border: 1px solid var(--mute-button-border);
        }
        .theme-toggle-button:hover:not(:disabled) {
            background: var(--mute-button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
        }
        .theme-toggle-button:active:not(:disabled) {
            background: var(--mute-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }


        .message-box {
            background-color: var(--message-box-bg);
            border: 1px solid var(--message-box-border);
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 8px 20px rgba(0,0,0,0.6);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            display: none;
            text-align: center;
            max-width: 90%;
        }
        .message-box p {
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            color: var(--message-box-text);
        }
        .message-box input[type="text"] {
            width: calc(100% - 2rem);
            padding: 0.85rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--message-input-border);
            background-color: var(--message-input-bg);
            color: var(--message-input-text);
            border-radius: 0.5rem;
            font-size: 1.1rem;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
        }
        .message-box .button-group {
            display: flex;
            justify-content: center;
            gap: 1.25rem;
        }
        .message-box button {
            background: var(--message-button-bg);
            color: var(--button-text-default);
            padding: 0.85rem 1.75rem;
            border: none;
            border-radius: 0.75rem;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }
        .message-box button:hover {
            background: var(--message-button-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(0,0,0,0.4);
        }
        .message-box button.red-button {
            background: var(--message-button-red-bg);
            color: var(--message-button-red-text);
        }
        .message-box button.red-button:hover {
            background: var(--message-button-red-hover-bg);
        }

        .answers-display {
            text-align: left;
            max-height: 350px;
            overflow-y: auto;
            border: 1px solid var(--answers-display-border);
            border-radius: 0.75rem;
            padding: 1.25rem;
            background-color: var(--answers-display-bg);
            box-shadow: inset 0 1px 5px rgba(0,0,0,0.15);
        }
        .answers-display ol {
            list-style: decimal;
            padding-left: 1.75rem;
        }
        .answers-display li {
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            color: var(--answers-display-text);
            display: flex;
            align-items: center;
        }
        .answers-display li .check-icon {
            margin-right: 0.75rem;
            color: var(--check-icon-color);
            font-size: 1.3em;
        }

        .skipped-questions-list {
            text-align: left;
            margin-top: 1.25rem;
            padding: 1.25rem;
            border: 1px dashed var(--skipped-list-border);
            border-radius: 0.75rem;
            background-color: var(--skipped-list-bg);
            max-height: 180px;
            overflow-y: auto;
            box-shadow: inset 0 1px 5px rgba(0,0,0,0.15);
        }
        .skipped-questions-list h3 {
            font-weight: bold;
            margin-bottom: 0.75rem;
            color: var(--skipped-list-heading);
            font-size: 1.15em;
        }
        .skipped-questions-list span {
            display: inline-block;
            background-color: var(--skipped-span-bg);
            color: var(--skipped-span-color);
            padding: 0.4rem 0.9rem;
            border-radius: 0.8rem;
            margin: 0.4rem;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .skipped-questions-list span:hover {
            background-color: var(--skipped-span-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .timer-display {
            font-size: 3rem;
            font-weight: 700;
            color: var(--timer-text-color);
            margin-bottom: 1rem;
        }
        .timer-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Two columns for inputs */
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        .timer-input {
            width: 100%; /* Make inputs fill their grid column */
            max-width: 100px; /* Max width for inputs */
            padding: 0.75rem 0.5rem; /* Adjusted padding */
            border-radius: 0.75rem; /* Rounded corners for inputs */
            border: 1px solid var(--timer-input-border);
            background-color: var(--timer-input-bg);
            color: var(--timer-input-text);
            text-align: center;
            font-size: 1.5rem; /* Larger font for numbers */
            font-weight: 600;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }
        .timer-inputs .input-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }
        .timer-inputs label {
            color: var(--paragraph-color);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        .timer-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            margin-top: 1rem; /* Space between inputs and controls */
        }
        .timer-button {
            background: var(--timer-button-bg);
            color: var(--button-text-default);
            padding: 0.75rem;
            border-radius: 0.75rem;
            border: 1px solid var(--timer-input-border);
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
            font-weight: bold;
            font-size: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .timer-button:hover:not(:disabled) {
            background: var(--timer-button-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(0,0,0,0.4);
        }
        .timer-button:active:not(:disabled) {
            background: var(--timer-button-active-bg);
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .timer-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Custom scrollbar styles */
        .container::-webkit-scrollbar {
            width: 10px;
        }

        .container::-webkit-scrollbar-track {
            background: var(--scrollbar-track-bg);
            border-radius: 10px;
        }

        .container::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb-bg);
            border-radius: 10px;
            border: 2px solid var(--scrollbar-track-bg);
        }

        .container::-webkit-scrollbar-thumb:hover {
            background: var(--scrollbar-thumb-hover-bg);
        }

        .answers-display::-webkit-scrollbar {
            width: 8px;
        }

        .answers-display::-webkit-scrollbar-track {
            background: var(--scrollbar-track-bg);
            border-radius: 8px;
        }

        .answers-display::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb-bg);
            border-radius: 8px;
            border: 2px solid var(--scrollbar-track-bg);
        }

        .answers-display::-webkit-scrollbar-thumb:hover {
            background: var(--scrollbar-thumb-hover-bg);
        }

        .skipped-questions-list::-webkit-scrollbar {
            width: 8px;
        }

        .skipped-questions-list::-webkit-scrollbar-track {
            background: var(--scrollbar-track-bg);
            border-radius: 8px;
        }

        .skipped-questions-list::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb-bg);
            border-radius: 8px;
            border: 2px solid var(--scrollbar-track-bg);
        }

        .skipped-questions-list::-webkit-scrollbar-thumb:hover {
            background: var(--scrollbar-thumb-hover-bg);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
</head>
<body>
    <div class="website-watermark">© razojahmes_</div>

    <div class="container">
        <div id="answer-input-section">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">Answer Sheet</h1>
            
            <div class="timer-section mb-6">
                <div id="timer-display" class="timer-display">00:00</div>
                <div class="timer-inputs">
                    <div class="input-wrapper">
                        <input type="number" id="minutes-input" placeholder="Min" value="60" class="timer-input">
                        <label for="minutes-input">Min</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="seconds-input" placeholder="Sec" value="0" class="timer-input">
                        <label for="seconds-input">Sec</label>
                    </div>
                </div>
                <div class="timer-controls">
                    <button id="set-timer-button" class="timer-button"><i class="fas fa-clock"></i></button>
                    <button id="start-timer-button" class="timer-button"><i class="fas fa-play"></i></button>
                    <button id="pause-timer-button" class="timer-button" disabled><i class="fas fa-pause"></i></button>
                    <button id="reset-timer-button" class="timer-button"><i class="fas fa-undo-alt"></i></button>
                </div>
            </div>

            <p class="text-xl text-gray-600 mb-6">Question <span id="question-number" class="font-semibold text-indigo-700">1</span></p>

            <div id="answer-buttons-grid" class="grid grid-cols-2 gap-4 mb-6">
                <button class="answer-button" data-answer="A">A</button>
                <button class="answer-button" data-answer="B">B</button>
                <button class="answer-button" data-answer="C">C</button>
                <button class="answer-button" data-answer="D">D</button>
            </div>

            <div class="flex justify-between gap-4 mb-6">
                <button id="prev-button" class="nav-button w-1/2" disabled><i class="fas fa-arrow-left mr-2"></i>Previous</button>
                <button id="next-button" class="nav-button w-1/2">Next <i class="fas fa-arrow-right ml-2"></i></button>
            </div>

            <button id="done-button" class="done-button">Done & Download PDF</button>
            <button id="preview-button" class="preview-button mt-4">Preview Answers</button>
            
            <div class="flex justify-between gap-4 mt-4">
                <button id="restart-button" class="restart-button w-1/2">Restart Test</button>
                <button id="add-option-button" class="add-option-button w-1/2">Add Option</button>
            </div>

            <div id="skipped-questions-container" class="skipped-questions-list hidden">
                <h3>Skipped Questions:</h3>
                <div id="skipped-questions-list-items">
                </div>
            </div>

            <button id="go-to-latest-q-button" class="nav-button mt-4 w-full"><i class="fas fa-forward-step mr-2"></i> Go to Latest Question</button>
            
            <div class="flex justify-center gap-4 mt-4">
                <button id="mute-button" class="mute-button"><i class="fas fa-volume-up"></i></button>
                <button id="theme-toggle-button" class="theme-toggle-button"><i class="fas fa-sun"></i></button>
            </div>
        </div>

        <div id="answers-summary-section" class="hidden">
            <div id="answers-list" class="answers-display mb-6">
            </div>
            <button id="close-preview-button" class="close-preview-button mt-3">Close Preview</button>
            <button id="start-new-sheet-button" class="reset-button mt-3">Start New Sheet</button>
        </div>

        <div id="message-box" class="message-box">
            <p id="message-text"></p>
            <input type="text" id="filename-input" placeholder="Enter filename (optional)" class="hidden">
            <div id="message-buttons" class="button-group">
                <button id="message-ok-button">OK</button>
            </div>
        </div>
    </div>

    <script>
        const { jsPDF } = window.jspdf;
        const synth = new Tone.Synth().toDestination();
        const alarmSynth = new Tone.MembraneSynth().toDestination();

        let answers = {};
        let currentQuestion = 1;
        let highestQuestionReached = 1;
        let isButtonDisabled = false;
        let isMuted = false;
        let isLightMode = false;

        let timerInterval = null;
        let timeLeft = 3600;
        let totalTimeAllocated = 3600;
        let isTimerRunning = false;

        const questionNumberSpan = document.getElementById('question-number');
        const answerButtonsGrid = document.getElementById('answer-buttons-grid');
        let answerButtons = document.querySelectorAll('.answer-button');
        const doneButton = document.getElementById('done-button');
        const previewButton = document.getElementById('preview-button');
        const startNewSheetButton = document.getElementById('start-new-sheet-button');
        const closePreviewButton = document.getElementById('close-preview-button');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const goToLatestQButton = document.getElementById('go-to-latest-q-button');
        const restartButton = document.getElementById('restart-button');
        const addOptionButton = document.getElementById('add-option-button');
        const muteButton = document.getElementById('mute-button');
        const themeToggleButton = document.getElementById('theme-toggle-button');

        const timerDisplay = document.getElementById('timer-display');
        const minutesInput = document.getElementById('minutes-input');
        const secondsInput = document.getElementById('seconds-input');
        const setTimerButton = document.getElementById('set-timer-button');
        const startTimerButton = document.getElementById('start-timer-button');
        const pauseTimerButton = document.getElementById('pause-timer-button');
        const resetTimerButton = document.getElementById('reset-timer-button');


        const answerInputSection = document.getElementById('answer-input-section');
        const answersSummarySection = document.getElementById('answers-summary-section');
        const answersListDiv = document.getElementById('answers-list');

        const skippedQuestionsContainer = document.getElementById('skipped-questions-container');
        const skippedQuestionsListItems = document.getElementById('skipped-questions-list-items');

        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const messageButtons = document.getElementById('message-buttons');
        const filenameInput = document.getElementById('filename-input');

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                isLightMode = true;
                themeToggleButton.querySelector('i').classList.remove('fa-sun');
                themeToggleButton.querySelector('i').classList.add('fa-moon');
            } else {
                document.body.classList.remove('light-mode');
                isLightMode = false;
                themeToggleButton.querySelector('i').classList.remove('fa-moon');
                themeToggleButton.querySelector('i').classList.add('fa-sun');
            }
            updateQuestionDisplay();
            updateSkippedQuestionsList();
            updateTimerDisplay();
        });


        function showMessageBox(message, buttonsConfig = [{ text: 'OK', className: '', onClick: hideMessageBox }], showFilenameInput = false) {
            messageText.textContent = message;
            messageButtons.innerHTML = '';

            if (showFilenameInput) {
                filenameInput.classList.remove('hidden');
                filenameInput.value = '';
                filenameInput.focus();
            } else {
                filenameInput.classList.add('hidden');
            }

            buttonsConfig.forEach(config => {
                const button = document.createElement('button');
                button.textContent = config.text;
                if (config.className) {
                    button.classList.add(...config.className.split(' '));
                }
                button.addEventListener('click', () => {
                    config.onClick();
                });
                messageButtons.appendChild(button);
            });
            messageBox.style.display = 'block';
        }

        function hideMessageBox() {
            messageBox.style.display = 'none';
            filenameInput.classList.add('hidden');
            toggleButtons(false);
        }

        function updateQuestionDisplay() {
            questionNumberSpan.textContent = currentQuestion;

            prevButton.disabled = currentQuestion <= 1;

            answerButtons = document.querySelectorAll('.answer-button');
            answerButtons.forEach(button => {
                button.classList.remove('bg-indigo-300', 'border-indigo-600');
                if (answers[currentQuestion] === button.dataset.answer) {
                    button.classList.add('bg-indigo-300', 'border-indigo-600');
                }
            });
        }

        function toggleButtons(disabled) {
            isButtonDisabled = disabled;
            answerButtons.forEach(button => button.disabled = disabled);
            doneButton.disabled = disabled;
            prevButton.disabled = disabled || currentQuestion <= 1;
            nextButton.disabled = disabled;
            goToLatestQButton.disabled = disabled;
            startNewSheetButton.disabled = disabled;
            restartButton.disabled = disabled;
            addOptionButton.disabled = disabled;
            previewButton.disabled = disabled;
            closePreviewButton.disabled = disabled;
            muteButton.disabled = disabled;
            themeToggleButton.disabled = disabled;

            setTimerButton.disabled = disabled || isTimerRunning;
            startTimerButton.disabled = disabled || isTimerRunning || timeLeft <= 0;
            pauseTimerButton.disabled = disabled || !isTimerRunning;
            resetTimerButton.disabled = disabled || (timeLeft === 0 && !isTimerRunning);
            minutesInput.disabled = disabled || isTimerRunning;
            secondsInput.disabled = disabled || isTimerRunning;
        }

        function playSound() {
            if (isMuted) return;
            if (Tone.context.state !== 'running') {
                Tone.context.resume();
            }
            synth.triggerAttackRelease("C5", "0.08", Tone.context.currentTime, 0.8);
        }

        function playAlarmSound() {
            if (isMuted) return;
            if (Tone.context.state !== 'running') {
                Tone.context.resume();
            }
            alarmSynth.triggerAttackRelease("C3", "0.5");
        }

        function navigateToQuestion(qNum) {
            currentQuestion = qNum;
            updateQuestionDisplay();
            updateSkippedQuestionsList();
            answerInputSection.classList.remove('hidden');
            answersSummarySection.classList.add('hidden');
        }

        function handleAnswerClick(event) {
            if (isButtonDisabled) return;
            playSound();
            toggleButtons(true);

            const selectedAnswer = event.target.dataset.answer;
            answers[currentQuestion] = selectedAnswer;

            if (skippedQuestions.has(currentQuestion)) {
                skippedQuestions.delete(currentQuestion);
            }

            currentQuestion++;
            highestQuestionReached = Math.max(highestQuestionReached, currentQuestion);

            updateQuestionDisplay();
            updateSkippedQuestionsList();

            setTimeout(() => {
                toggleButtons(false);
            }, 300);
        }

        answerButtons.forEach(button => {
            button.addEventListener('click', handleAnswerClick);
        });

        prevButton.addEventListener('click', () => {
            if (isButtonDisabled) return;
            if (currentQuestion > 1) {
                currentQuestion--;
                updateQuestionDisplay();
            }
        });

        nextButton.addEventListener('click', () => {
            if (isButtonDisabled) return;
            toggleButtons(true);

            if (answers[currentQuestion] === undefined) {
                answers[currentQuestion] = null;
            }

            if (answers[currentQuestion] === null) {
                skippedQuestions.add(currentQuestion);
            }

            currentQuestion++;
            highestQuestionReached = Math.max(highestQuestionReached, currentQuestion);

            updateQuestionDisplay();
            updateSkippedQuestionsList();

            setTimeout(() => {
                toggleButtons(false);
            }, 300);
        });

        goToLatestQButton.addEventListener('click', () => {
            if (isButtonDisabled) return;
            currentQuestion = highestQuestionReached;
            if (answers[currentQuestion] !== undefined) {
                currentQuestion++;
            }
            updateQuestionDisplay();
        });

        restartButton.addEventListener('click', () => {
            if (isButtonDisabled) return;
            showMessageBox(
                "Are you sure you want to restart the test? All current answers will be lost.",
                [
                    {
                        text: 'Yes, Restart',
                        className: 'red-button',
                        onClick: () => {
                            hideMessageBox();
                            resetAnswerSheet();
                        }
                    },
                    {
                        text: 'Cancel',
                        className: '',
                        onClick: hideMessageBox
                    }
                ]
            );
        });

        addOptionButton.addEventListener('click', () => {
            if (isButtonDisabled) return;
            showMessageBox(
                "Enter a new single letter option (e.g., E, F):",
                [
                    {
                        text: 'Add',
                        className: '',
                        onClick: () => {
                            const newOption = filenameInput.value.trim().toUpperCase();
                            if (newOption.length === 1 && newOption.match(/[A-Z]/) && !Array.from(answerButtons).some(btn => btn.dataset.answer === newOption)) {
                                const newButton = document.createElement('button');
                                newButton.classList.add('answer-button');
                                newButton.dataset.answer = newOption;
                                newButton.textContent = newOption;
                                newButton.addEventListener('click', handleAnswerClick);
                                answerButtonsGrid.appendChild(newButton);
                                answerButtons = document.querySelectorAll('.answer-button');
                                hideMessageBox();
                            } else {
                                showMessageBox("Invalid option. Please enter a single, unique uppercase letter.");
                            }
                        }
                    },
                    {
                        text: 'Cancel',
                        className: 'red-button',
                        onClick: hideMessageBox
                    }
                ],
                true
            );
        });


        previewButton.addEventListener('click', () => {
            if (isButtonDisabled) return;
            displayAnswersOnPage();
        });

        closePreviewButton.addEventListener('click', () => {
            answerInputSection.classList.remove('hidden');
            answersSummarySection.classList.add('hidden');
            updateQuestionDisplay();
        });

        muteButton.addEventListener('click', () => {
            isMuted = !isMuted;
            const icon = muteButton.querySelector('i');
            if (isMuted) {
                icon.classList.remove('fa-volume-up');
                icon.classList.add('fa-volume-mute');
                muteButton.classList.add('muted');
            } else {
                icon.classList.remove('fa-volume-mute');
                icon.classList.add('fa-volume-up');
                muteButton.classList.remove('muted');
            }
        });

        themeToggleButton.addEventListener('click', () => {
            isLightMode = !isLightMode;
            if (isLightMode) {
                document.body.classList.add('light-mode');
                themeToggleButton.querySelector('i').classList.remove('fa-sun');
                themeToggleButton.querySelector('i').classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            } else {
                document.body.classList.remove('light-mode');
                themeToggleButton.querySelector('i').classList.remove('fa-moon');
                themeToggleButton.querySelector('i').classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            }
        });

        let skippedQuestions = new Set();

        function updateSkippedQuestionsList() {
            skippedQuestionsListItems.innerHTML = '';
            if (skippedQuestions.size === 0) {
                skippedQuestionsContainer.classList.add('hidden');
                return;
            }

            skippedQuestionsContainer.classList.remove('hidden');
            const sortedSkipped = Array.from(skippedQuestions).sort((a, b) => a - b);

            sortedSkipped.forEach(qNum => {
                const span = document.createElement('span');
                span.textContent = qNum;
                span.title = `Click to go to question ${qNum}`;
                span.addEventListener('click', () => navigateToQuestion(qNum));
                skippedQuestionsListItems.appendChild(span);
            });
        }

        function displayAnswersOnPage() {
            answersListDiv.innerHTML = '';
            const allQuestionNumbers = Object.keys(answers).map(Number).sort((a, b) => a - b);

            if (allQuestionNumbers.length === 0) {
                answersListDiv.innerHTML = '<p class="text-gray-500">No answers recorded.</p>';
                return;
            }

            const ol = document.createElement('ol');
            allQuestionNumbers.forEach(qNum => {
                const li = document.createElement('li');
                const answer = answers[qNum];
                if (answer !== null) {
                    const checkIcon = document.createElement('i');
                    checkIcon.classList.add('fas', 'fa-check-circle', 'check-icon');
                    li.appendChild(checkIcon);
                }
                li.append(`${qNum}. ${answer !== null ? answer : '(Skipped)'}`);
                ol.appendChild(li);
            });
            answersListDiv.appendChild(ol);

            answerInputSection.classList.add('hidden');
            answersSummarySection.classList.remove('hidden');
        }

        function addPdfWatermark(doc) {
            doc.setFontSize(40);
            doc.setTextColor(200, 200, 200);
            doc.setR2L(false);
            doc.text("razojahmes_", doc.internal.pageSize.width / 2, doc.internal.pageSize.height / 2, {
                angle: 45,
                align: 'center',
                baseline: 'middle'
            });
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
        }

        async function generatePdf() {
            const answeredQuestionsCount = Object.values(answers).filter(a => a !== null && a !== undefined).length;
            if (answeredQuestionsCount === 0 && skippedQuestions.size === 0) {
                showMessageBox("No answers recorded yet. Please select some answers before downloading.");
                return;
            }

            const unansweredQuestions = Array.from(skippedQuestions).sort((a, b) => a - b);
            if (unansweredQuestions.length > 0) {
                showMessageBox(
                    `You have skipped the following questions: ${unansweredQuestions.join(', ')}. Do you want to go back and answer them or proceed with download?`,
                    [
                        {
                            text: 'Go Back',
                            className: '',
                            onClick: () => {
                                hideMessageBox();
                                navigateToQuestion(unansweredQuestions[0]);
                            }
                        },
                        {
                            text: 'Proceed Anyway',
                            className: 'red-button',
                            onClick: () => {
                                hideMessageBox();
                                promptForFilenameAndGeneratePdf();
                            }
                        }
                    ]
                );
                return;
            }

            promptForFilenameAndGeneratePdf();
        }

        function promptForFilenameAndGeneratePdf() {
            showMessageBox(
                "Enter a filename for your answer sheet:",
                [
                    {
                        text: 'Download',
                        className: '',
                        onClick: () => {
                            const filename = filenameInput.value.trim();
                            hideMessageBox();
                            proceedToPdfGeneration(filename);
                        }
                    },
                    {
                        text: 'Cancel',
                        className: 'red-button',
                        onClick: hideMessageBox
                    }
                ],
                true
            );
        }

        function proceedToPdfGeneration(userFilename) {
            const doc = new jsPDF();
            doc.setFont('Open Sans', 'normal');

            let yOffset = 10;
            const lineHeight = 10;
            const pageHeight = doc.internal.pageSize.height;
            const margin = 10;

            const currentDate = new Date();
            const downloadTime = currentDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });
            const downloadDate = currentDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            const filenameToDisplay = userFilename || "Answer Sheet";
            const pdfTitle = `Answer Sheet: ${filenameToDisplay}`;
            
            let timerInfo = "Timer: Not used";
            if (totalTimeAllocated > 0) {
                const totalMinutes = Math.floor(totalTimeAllocated / 60);
                const totalSeconds = totalTimeAllocated % 60;
                const totalTimeFormatted = `${String(totalMinutes).padStart(2, '0')}:${String(totalSeconds).padStart(2, '0')}`;

                if (isTimerRunning) {
                    const remainingMinutes = Math.floor(timeLeft / 60);
                    const remainingSeconds = timeLeft % 60;
                    const remainingTimeFormatted = `${String(remainingMinutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
                    timerInfo = `Timer: Running. Total: ${totalTimeFormatted}, Remaining: ${remainingTimeFormatted}`;
                } else if (timeLeft > 0) {
                    const remainingMinutes = Math.floor(timeLeft / 60);
                    const remainingSeconds = timeLeft % 60;
                    const remainingTimeFormatted = `${String(remainingMinutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
                    timerInfo = `Timer: Paused/Set. Total: ${totalTimeFormatted}, Remaining: ${remainingTimeFormatted}`;
                } else {
                    const timeExceeded = Math.abs(timeLeft);
                    const exceededMinutes = Math.floor(timeExceeded / 60);
                    const exceededSeconds = timeExceeded % 60;
                    const exceededTimeFormatted = `${String(exceededMinutes).padStart(2, '0')}:${String(exceededSeconds).padStart(2, '0')}`;
                    timerInfo = `Timer: Ended. Total: ${totalTimeFormatted}. Time Exceeded: ${exceededTimeFormatted}`;
                }
            }


            doc.setFontSize(16);
            doc.text(pdfTitle, 10, yOffset);
            yOffset += lineHeight;
            doc.setFontSize(10);
            doc.text(`Date: ${downloadDate}`, 10, yOffset);
            yOffset += lineHeight;
            doc.text(`Time Downloaded: ${downloadTime}`, 10, yOffset);
            yOffset += lineHeight;
            doc.text(timerInfo, 10, yOffset);
            yOffset += lineHeight * 2;

            doc.setFontSize(12);

            const allQuestionNumbers = Object.keys(answers).map(Number).sort((a, b) => a - b);

            addPdfWatermark(doc);

            allQuestionNumbers.forEach((qNum) => {
                const answer = answers[qNum];
                const text = `${qNum}. ${answer !== null ? answer : '(Skipped)'}`;

                if (yOffset + lineHeight > pageHeight - margin) {
                    doc.addPage();
                    addPdfWatermark(doc);
                    yOffset = margin;
                }

                doc.text(text, 10, yOffset);
                yOffset += lineHeight;
            });

            // Ensure summary always starts on a new page
            if (yOffset > margin || allQuestionNumbers.length === 0) { // Add new page if content exists or if it's the first page and no answers
                doc.addPage();
                addPdfWatermark(doc);
                yOffset = margin;
            }

            doc.setFontSize(14);
            doc.text("--- Summary ---", 10, yOffset + lineHeight);
            yOffset += lineHeight * 2;

            const totalQuestions = highestQuestionReached - 1;
            const answeredQuestionsCount = Object.values(answers).filter(a => a !== null && a !== undefined).length;
            const unansweredQuestionsCount = skippedQuestions.size;

            doc.setFontSize(12);
            doc.text(`Total Questions: ${totalQuestions}`, 10, yOffset);
            yOffset += lineHeight;
            doc.text(`Answered: ${answeredQuestionsCount}`, 10, yOffset);
            yOffset += lineHeight;
            doc.text(`Unanswered: ${unansweredQuestionsCount}`, 10, yOffset);
            yOffset += lineHeight;

            const answerOptionCounts = {};
            Array.from(answerButtons).forEach(button => {
                answerOptionCounts[button.dataset.answer] = 0;
            });

            for (const qNum in answers) {
                const answer = answers[qNum];
                if (answer !== null && answerOptionCounts.hasOwnProperty(answer)) {
                    answerOptionCounts[answer]++;
                }
            }

            doc.text("Answer Distribution:", 10, yOffset + lineHeight);
            yOffset += lineHeight * 2;

            for (const option in answerOptionCounts) {
                doc.text(`  ${option}: ${answerOptionCounts[option]}`, 10, yOffset);
                yOffset += lineHeight;
            }


            const pdfBlob = doc.output('blob');
            const pdfUrl = URL.createObjectURL(pdfBlob);
            
            // Open a new window and embed the PDF using an iframe
            const newWindow = window.open('', '_blank');
            if (newWindow) {
                const htmlContent = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>${filenameToDisplay || 'Answer Sheet'}</title>
                        <style>
                            body { margin: 0; overflow: hidden; }
                            iframe { width: 100vw; height: 100vh; border: none; }
                        </style>
                    </head>
                    <body>
                        <iframe src="${pdfUrl}"></iframe>
                    </body>
                    </html>
                `;
                newWindow.document.write(htmlContent);
                newWindow.document.close(); // Important to close the document stream
                newWindow.document.title = filenameToDisplay || 'Answer Sheet'; // Explicitly set the new window's title
            } else {
                showMessageBox("Pop-up blocked! Please allow pop-ups for this site to view the PDF.");
            }
            
            URL.revokeObjectURL(pdfUrl); // Revoke the URL after it's used

            showMessageBox("PDF opened in a new tab! To save with your chosen filename, use your browser's 'Save As' option (Ctrl+S or Cmd+S) from the new tab.");
        }


        function resetAnswerSheet() {
            answers = {};
            currentQuestion = 1;
            highestQuestionReached = 1;
            skippedQuestions.clear();
            updateQuestionDisplay();
            updateSkippedQuestionsList();
            answersListDiv.innerHTML = '';
            answerInputSection.classList.remove('hidden');
            answersSummarySection.classList.add('hidden');

            clearInterval(timerInterval);
            timeLeft = 3600;
            totalTimeAllocated = 3600;
            isTimerRunning = false;
            updateTimerDisplay();
            minutesInput.value = 60;
            secondsInput.value = 0;
            toggleButtons(false);
        }

        doneButton.addEventListener('click', () => {
            generatePdf();
        });

        startNewSheetButton.addEventListener('click', resetAnswerSheet);

        function updateTimerDisplay() {
            const minutes = Math.floor(Math.abs(timeLeft) / 60);
            const seconds = Math.abs(timeLeft) % 60;
            const sign = timeLeft < 0 ? "-" : "";
            timerDisplay.textContent = `${sign}${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            toggleButtons(false);
        }

        function setTimer() {
            const minutes = parseInt(minutesInput.value) || 0;
            const seconds = parseInt(secondsInput.value) || 0;
            timeLeft = (minutes * 60) + seconds;
            totalTimeAllocated = timeLeft;
            updateTimerDisplay();
        }

        function startTimer() {
            if (isTimerRunning) return;
            if (timeLeft <= 0 && totalTimeAllocated === 0) {
                showMessageBox("Please set a timer duration first.");
                return;
            }
            isTimerRunning = true;
            toggleButtons(true);
            startTimerButton.disabled = true;
            pauseTimerButton.disabled = false;
            setTimerButton.disabled = true;
            minutesInput.disabled = true;
            secondsInput.disabled = true;

            timerInterval = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    updateTimerDisplay();
                } else {
                    clearInterval(timerInterval);
                    isTimerRunning = false;
                    playAlarmSound();
                    showMessageBox("Time's Up!");
                    toggleButtons(false);
                }
            }, 1000);
        }

        function pauseTimer() {
            if (!isTimerRunning) return;
            clearInterval(timerInterval);
            isTimerRunning = false;
            toggleButtons(false);
            startTimerButton.disabled = false;
            pauseTimerButton.disabled = true;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timeLeft = 0;
            totalTimeAllocated = 0;
            isTimerRunning = false;
            updateTimerDisplay();
            toggleButtons(false);
        }

        setTimerButton.addEventListener('click', setTimer);
        startTimerButton.addEventListener('click', startTimer);
        pauseTimerButton.addEventListener('click', pauseTimer);
        resetTimerButton.addEventListener('click', resetTimer);

        updateQuestionDisplay();
        updateSkippedQuestionsList();
        updateTimerDisplay();
        toggleButtons(false);
    </script>
</body>
</html>
